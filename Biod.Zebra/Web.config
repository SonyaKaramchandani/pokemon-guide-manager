<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>
  <connectionStrings>
    <clear />
    <add name="DefaultConnection" connectionString="" providerName="System.Data.SqlClient" />
    <add name="BiodZebraEntities" connectionString="" providerName="System.Data.EntityClient" />
    <add name="DiseasesAPIEntities" connectionString="" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="3.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />

    <!--log text file setting-->
    <add key="isLogToFile" value="true" />
    <add key="logFile" value="C:\temp\Biod.Zebra.Api_Log_" />
    <add key="LogFolder" value="C:\temp\Biod.Zebra" />
    <add key="LogFileName" value="Zebra.log" />

    <!--Log request information-->
    <add key="IsLogRequestInfoEnabled" value="true" />

    <!--if IsMessagingUnderTesting is true, send the emails to the EmailTestingRecipientList without sending them to the real clients-->
    <add key="IsMessagingUnderTesting" value="false" />
    <add key="EmailTestingRecipientList" value="" />

    <!--AOI locations limit-->
    <add key="AoiLocationsLimit" value="10" />

    <!--Was Email Sent Time Check In Minutes-->
    <add key="WasEmailSentTimeCheckInMinutes" value="3.0" />

    <add key="AdminUserEmail" value="" />
    <add key="AdminUserPassword" value="" />

    <!--sales email-->
    <add key="SalesEmail" value="" />
    <add key="SalesEmailSubject" value="Interest in InsightsDev Enterprise" />

    <!--confirmation email-->
    <add key="ZebraConfirmationEmailSubject" value="Confirm your InsightsDev account" />

    <!--welcome email-->
    <add key="ZebraWelcomeEmailSubject" value="Welcome to BlueDot InsightsDev" />
    <add key="ZebraWelcomeEmailNumOfEventsToShow" value="5" />
    <add key="HostUrl" value="http://localhost/Biod.Zebra" />


    <add key="Debug" value="false" />
    <add key="ApiTimeout" value="600000" />
    <add key="SwaggerApiVersion" value="v1" />
    <add key="SwaggerApiBaseUrl" value="Biod.Zebra/swagger" />

    <!--Zebra APIs-->
    <add key="ZebraApiBaseUrl" value="http://localhost/Biod.Zebra.Api" />
    <add key="ZebraApiUserName" value="" />
    <add key="ZebraApiPassword" value="" />

    <!--George APIs to get the risk value e.g. /location/risks?latitude=10&longitude=10-->
    <add key="GeorgeApiBaseUrl" value="" /> 
    <add key="GeorgeApiUserName" value="" />
    <add key="GeorgeApiPassword" value="" />

    <!--Private Users Roles-->
    <add key="AdminUsersRole" value="" />
    <add key="UnsubscribedUsersRole" value="" />
    <add key="PaidUsersRole" value="" />
    <add key="EditorUsersRole" value="" />
    <!--Zebra version-->
    <add key="ZebraVersion" value="V11" />
    <add key="ZebraTitleAndVersion" value="Insights by BlueDot Dev" />

    <!-- Enable or disable Google and Litmus Analytics -->
    <add key="IsGoogleAnalyticsEnabled" value="true" />
    <add key="IsLitmusAnalyticsEnabled" value="true" />
    <add key="IsHeapAnalyticsEnabled" value="true" />
    <add key="IsHotjarAnalyticsEnabled" value="true" />

    <!-- Litmus Tracking ID - Dev -->
    <add key="LitmusTrackingId" value="aiqogb8w" />

    <!-- Google Analytics Tracking ID - Dev -->
    <add key="GaTrackingId" value="UA-57199677-9" />

    <!-- Heap Tracking ID - Dev -->
    <add key="HeapTrackingId" value="3688113639" />

    <!-- Hotjar Tracking ID - Dev -->
    <add key="HotjarTrackingId" value="1290582" />
    
    <!-- JWT for Token-based Authentication -->
    <add key="JwtSecretKey" value="" />
    <add key="JwtTokenExpireMinutes" value="1440" />

    <!--appox. 100km-->
    <add key="EventDistanceBuffer" value="100000" />
    <!--real ACCOUNT SID-->
    <add key="SMSAccountIdentification" value="" />
    <!--testing AUTH TOKEN-->
    <add key="SMSAuthToken" value="" />
    <!--Twilio outgoing phone number-->
    <add key="SMSAccountFrom" value="" />
    <!--Configure validation logic for user-->
    <add key="AllowOnlyAlphanumericUserNames" value="false" />
    <add key="RequireUniqueEmail" value="true" />
    <!--Configure validation logic for passwords-->
    <add key="RequiredLength" value="6" />
    <add key="RequireNonLetterOrDigit" value="false" />
    <add key="RequireDigit" value="false" />
    <add key="RequireLowercase" value="false" />
    <add key="RequireUppercase" value="false" />
    <!--Configure user lockout defaults-->
    <add key="UserLockoutEnabledByDefault" value="true" />
    <add key="DefaultAccountLockoutTimeSpan" value="5" />
    <add key="MaxFailedAccessAttemptsBeforeLockout" value="5" />
    <!--Configure token expiry defaults-->
    <add key="IdentityTokenLifespanInDays" value="7.0" />
    <!--mapping configuration section-->
    <add key="HasMap" value="false" />
    <add key="BingMapKey" value="" />
    <!--UsingMap could be Bing or Google or ESRI-->
    <add key="UsingMap" value="ESRI3" />
    <!--email from settings-->
    <add key="SmtpHostName" value="smtp.sendgrid.net" />
    <add key="SmtpPort" value="587" />
    <add key="SmtpFrom" value="noreply@bluedot.global" />
    <add key="SmtpUserName" value="" />
    <add key="SmtpPassword" value="" />
  </appSettings>
  <system.web>
    <customErrors mode="Off" />
    <authentication mode="None" />
    <compilation debug="true" targetFramework="4.7" />
    <httpRuntime targetFramework="4.7" />
    <httpModules>
      <add name="ScriptCompressionModule" type="Westwind.Web.ScriptCompressionModule,Westwind.Web" />
    </httpModules>
    <pages>
      <namespaces>
        <add namespace="Westwind.Utilities" />
        <add namespace="Westwind.Web" />
      </namespaces>
    </pages>
    <!--timeout setting per minutes-->
    <sessionState mode="InProc" timeout="60" />
  </system.web>
  <system.webServer>
    <modules>
      <remove name="FormsAuthentication" />
      <remove name="TelemetryCorrelationHttpModule" />
      <add name="TelemetryCorrelationHttpModule" type="Microsoft.AspNet.TelemetryCorrelation.TelemetryCorrelationHttpModule, Microsoft.AspNet.TelemetryCorrelation" preCondition="integratedMode,managedHandler" />
      <add name="ScriptCompressionModule" type="Westwind.Web.ScriptCompressionModule,Westwind.Web" />
    </modules>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <remove name="OPTIONSVerbHandler" />
      <remove name="TRACEVerbHandler" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
    <staticContent>
      <remove fileExtension=".woff" />
      <remove fileExtension=".woff2" />
      <remove fileExtension=".ttf" />
      <remove fileExtension=".eot" />
      <remove fileExtension=".svg" />
      <!-- In case IIS already has this mime type -->
      <mimeMap fileExtension=".woff" mimeType="application/x-font-woff" />
      <mimeMap fileExtension=".woff2" mimeType="application/x-font-woff2" />
      <mimeMap fileExtension=".ttf" mimeType="application/x-font-ttf" />
      <mimeMap fileExtension=".eot" mimeType="application/x-font-eot" />
      <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />

      <remove fileExtension=".json" />
      <mimeMap fileExtension=".json" mimeType="application/json" />
    </staticContent>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security.OAuth" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin.Security.Cookies" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.Owin" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.1.0" newVersion="4.0.1.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Antlr3.Runtime" publicKeyToken="eb42632606e9261f" />
        <bindingRedirect oldVersion="0.0.0.0-3.5.0.2" newVersion="3.5.0.2" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Diagnostics.DiagnosticSource" publicKeyToken="cc7b13ffcd2ddd51" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.2.1" newVersion="4.0.2.1" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Optimization" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-1.1.0.0" newVersion="1.1.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-1.6.5135.21930" newVersion="1.6.5135.21930" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" />
        <bindingRedirect oldVersion="0.0.0.0-11.0.0.0" newVersion="11.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Http" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.2.6.0" newVersion="5.2.6.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Net.Http.Formatting" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.2.6.0" newVersion="5.2.6.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-5.2.7.0" newVersion="5.2.7.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="mssqllocaldb" />
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
    </providers>
  </entityFramework>
  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=1.0.8.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:default /nowarn:1659;1699;1701" />
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=1.0.8.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:default /nowarn:41008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+" />
    </compilers>
  </system.codedom>
  <log4net debug="false">
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <file value="C:\temp\Biod.Zebra\Zebra.log" />
      <appendToFile value="true" />
      <rollingStyle value="Date" />
      <datePattern value="yyyyMMdd" />
      <maxSizeRollBackups value="30" />
      <maximumFileSize value="1MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%d{yyyy-MM-dd HH:mm:ss}-%P{log4net:HostName}&#x9;%P{userName}&#x9;%identity&#x9;%-5level&#x9;Thread:[%thread]&#x9;%-60m&#x9;%location&#x9;%P{hostAddr} &#x9;%P{browser}&#x9;%P{code} %n" />
      </layout>
    </appender>
    <appender name="DatabaseLogAppender" type="log4net.Appender.AdoNetAppender">
      <bufferSize value="1" />
      <connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      <connectionStringName value="DefaultConnection" />
      <commandText value="if(isNull(@identity,'')='') set @identity = @userName; INSERT INTO ActivityLog ([Date],[Thread],[Level],[Logger],[Message],[Exception],[UserName],[HostAddress],[Browser],[ServerName],[Url],[ApplicationName])   VALUES (@log_date, @thread, @log_level, @logger, @message, @exception, @identity, @hostAddr, @browser,@serverName, @url, @applicationName)" />
      <parameter>
        <parameterName value="@log_date" />
        <dbType value="DateTime" />
        <layout type="log4net.Layout.RawTimeStampLayout" />
      </parameter>
      <parameter>
        <parameterName value="@thread" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%thread" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@log_level" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%level" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@logger" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%logger" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@message" />
        <dbType value="String" />
        <size value="20000" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%message" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@exception" />
        <dbType value="String" />
        <size value="20000" />
        <layout type="log4net.Layout.ExceptionLayout" />
      </parameter>
      <parameter>
        <parameterName value="@identity" />
        <dbType value="String" />
        <size value="128" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%identity" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@userName" />
        <dbType value="String" />
        <size value="128" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%P{userName}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@hostAddr" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%P{hostAddr}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@browser" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%P{browser}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@serverName" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%P{log4net:HostName}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@url" />
        <dbType value="String" />
        <size value="2048" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%P{url}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@applicationName" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="Zebra" />
        </layout>
      </parameter>
    </appender>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="RollingLogFileAppender" />
      <appender-ref ref="DatabaseLogAppender" />
    </root>
  </log4net>
</configuration>